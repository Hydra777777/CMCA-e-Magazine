<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMCA 40th Anniversary Magazine</title>
    <!-- Favicon -->
    <link rel="icon" href="Images\favicon.png" type="image/png">
    <!-- Tailwind CSS CDN for basic styling -->
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        body {
            font-family: "Inter", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #1a202c;
            color: #e2e8f0;

            /* Background Image Styling */
            background-image: url('Images/flipbook bg.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        #magazine {
            width: 800px;
            height: 500px;
            background-color: #2d3748;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border-radius: 8px;
            overflow: hidden;
        }

        #magazine .page {
            background-color: #2d3748;
            box-sizing: border-box;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        #magazine .page img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 4px;
        }

        @media (max-width: 900px) {
            #magazine {
                width: 90vw;
                height: calc(90vw * (500 / 800));
            }
        }

        @media (max-width: 600px) {
            #magazine {
                width: 95vw;
                height: calc(95vw * (500 / 800));
            }
        }

        @media (max-height: 600px) {
            #magazine {
                height: 90vh;
                width: calc(90vh * (800 / 500));
            }
        }
    </style>
</head>
<body class="bg-gray-900 flex items-center justify-center">

    <div id="magazine" class="relative rounded-lg shadow-xl">
        <!-- Page 1: Cover Page -->
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Cover+Page" alt="Cover Page">
        </div>
        <!-- Page 2: Inside Left -->
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+2" alt="Page 2 Content">
        </div>
        <!-- Page 3: Inside Right -->
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+3" alt="Page 3 Content">
        </div>
        <!-- Page 4: Next Left -->
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+4" alt="Page 4 Content">
        </div>
        <!-- Page 5: Next Right -->
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+5" alt="Page 5 Content">
        </div>
        <!-- Page 6: Placeholder Pages (20 additional pages) -->
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+6" alt="Page 6 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+7" alt="Page 7 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+8" alt="Page 8 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+9" alt="Page 9 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+10" alt="Page 10 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+11" alt="Page 11 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+12" alt="Page 12 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+13" alt="Page 13 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+14" alt="Page 14 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+15" alt="Page 15 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+16" alt="Page 16 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+17" alt="Page 17 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+18" alt="Page 18 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+19" alt="Page 19 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+20" alt="Page 20 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+21" alt="Page 21 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+22" alt="Page 22 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+23" alt="Page 23 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/4B5563/F9FAFB?text=Page+24" alt="Page 24 Content">
        </div>
        <div class="page">
            <img src="https://placehold.co/400x500/374151/D1D5DB?text=Page+25" alt="Page 25 Content">
        </div>
        <!-- Page 26: Back Cover (originally page 6) -->
        <div class="page">
            <img src="https://placehold.co/400x500/2D3748/E2E8F0?text=Back+Cover" alt="Back Cover">
        </div>
    </div>

    <!-- jQuery is a dependency for turn.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- turn.js library - Updated to the official CDN link -->
    <script src="http://www.turnjs.com/lib/turn.min.js"></script>

    <script>
        $(document).ready(function() {
            // Function to initialize or resize the magazine
            function initializeMagazine() {
                var magazine = $('#magazine');
                var currentWidth = magazine.width();
                var currentHeight = magazine.height();

                if ($.fn.turn) {
                    if (magazine.data('turn-page') === undefined) {
                        magazine.turn({
                            width: currentWidth,
                            height: currentHeight,
                            autoCenter: true,
                            gradients: true,
                            acceleration: true,
                            display: 'double',
                            duration: 1000,
                        });
                    } else {
                        // If already initialized, just update size
                        magazine.turn('size', currentWidth, currentHeight);
                    }

                } else {
                    console.error("Error: turn.js function not found. Ensure the script is loaded correctly.");
                }
            }

            // Load all images first, then initialize turn.js
            var images = $('#magazine').find('img');
            var loadedImages = 0;
            var totalImages = images.length;

            if (totalImages === 0) {
                initializeMagazine();
            } else {
                images.each(function() {
                    if (this.complete) {
                        loadedImages++;
                    } else {
                        $(this).on('load', function() {
                            loadedImages++;
                            if (loadedImages === totalImages) {
                                initializeMagazine();
                            }
                        }).on('error', function() {
                            console.error("Error loading image:", this.src);
                            loadedImages++;
                            if (loadedImages === totalImages) {
                                initializeMagazine();
                            }
                        });
                    }
                });
                if (loadedImages === totalImages) {
                    initializeMagazine();
                }
            }

            // Add keyboard navigation
            $(document).keydown(function(e){
                var magazine = $('#magazine');
                if (e.keyCode == 37) { // Left arrow key
                    magazine.turn('previous');
                    e.preventDefault();
                } else if (e.keyCode == 39) { // Right arrow key
                    magazine.turn('next');
                    e.preventDefault();
                }
            });

            // Handle window resize to make the magazine responsive
            $(window).on('resize', function() {
                initializeMagazine();
            });
        });
    </script>
</body>
</html>